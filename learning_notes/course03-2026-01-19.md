# Course 03 学习笔记（Understanding AI Agentic Design Patterns）

- 日期：2026-01-19
- 学习时长：40min

## 课程目标与核心收获
- 掌握常见 Agent 设计模式的目的、结构与取舍（trade‑offs），能够将模型、memory、tools、planner 等能力组合成可靠的应用。
- 理解运行时（runtime）在调度、消息路由、并发控制与安全边界中的作用，区分 stand‑alone 与 distributed runtime。

## 关键术语与模式（英文保留并解释）
- ReAct（Reasoning + Acting）：推理与行动结合；在推理步骤中决定是否调用外部工具（act），常用于需要检索/计算/执行命令的任务。
- Planner / Executor（Planner‑Solver）：将复杂任务拆分（planning），由执行器（executor）逐步执行与验证，适合 multi‑step problems。
- Memory（Short‑term / Long‑term）：短期记忆是会话上下文；长期记忆是持久化的信息（向量库/数据库），用于个性化与长周期任务。
- Tool Use / Tool Invocation：Agent 调用外部 API/函数（搜索、计算、数据库查询等）；通常通过 Tool Registry/插件系统统一管理。
- Chain‑of‑Thought（CoT）：让模型显式展开中间推理步骤的提示技术，有助于复杂推理的准确性与稳定性。
- Multi‑Agent Patterns（Leader‑Worker、BlackBoard 等）：多 Agent 协作与协调策略（leader 分配任务、workers 执行，或共享黑板交换信息）。
- Orchestration / Runtime：运行时负责调度 agents、路由消息、并发与安全；stand‑alone 适合单进程、distributed 适合跨进程/跨机/跨语言。
- Embeddings & Vector DB：Embeddings 是文本的向量表示；Vector DB 用于相似度检索与高效查询（支持 RAG）。
- MCP（Model Context Protocol）：模型/Agent 之间的上下文通信协议，用于标准化消息格式与能力暴露（如 agent‑to‑agent）。

## 示例与实践要点
- 设计一个 ReAct 工作流：先尝试纯推理，必要时调用 Search/Calculator 等工具，再整合结果输出。
- 规划‑执行范式：把题目/需求分解为子任务清单（plan），逐条执行并记录中间结果，遇到失败可重试或反思（reflection）。
- 多 Agent 协作：检索 Agent 负责查找材料，组织 Agent 负责结构化答案；定义清晰的消息协议与停止条件。

## 易错点与排查
- 代理（Proxy）/SOCKS 报错（httpx）：若环境变量配置了 socks5 但未安装 socksio，可安装 `httpx[socks]` 或清理代理变量；重启内核使其生效。
- `.env` 未加载：在 notebook 首个配置单元加载 `dotenv`；变更后重启内核。
- Token/Endpoint 缺失或模型名错误：统一在 `.env` 或配置对象中设置并打印检查。
- 运行时混淆：明确单进程（stand‑alone）与分布式（distributed）的边界和适用性。

## 参考与下一步
- 代码示例：
  - [03-agentic-design-patterns/code_samples/03-python-agent-framework.ipynb](03-agentic-design-patterns/code_samples/03-python-agent-framework.ipynb)
  - [03-agentic-design-patterns/code_samples/03-semantic-kernel.ipynb](03-agentic-design-patterns/code_samples/03-semantic-kernel.ipynb)
- 下一步：
  - 跑通一个 ReAct 示例（含 SearchTool/Calculator）。
  - 尝试双 Agent 协作（检索/组织答案），演示消息流与停止条件。

## 下节课预习（Tool Use Design Pattern）
- 主题：工具使用模式，教你让 Agent 通过受控接口调用外部功能（API/函数/服务）。
- 关键术语：Tool Use / Tool Invocation、Tool Registry、Function Calling、Permissions、Error Handling、Tool Selection。
- 能力点：安全调用（参数校验、超时/重试）、多工具选择与结果归并、提示与上下文结构化（grounding）。
- 练习建议：准备 SearchTool 与 Calculator 组合的 ReAct 工作流；设计工具的输入输出与失败回退（fallback）。
